<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <title></title>
</head>
<body>



    <div id="contentbasket">
        <a href="basket.html">Корзина</a>
        <div id="numberProducts"></div><!-- Количество товаров в корзине -->
        <img src='logo/cart.png' id='cartLogo' /><!-- Логотип корзины -->
          <div id="basket"><h1 id="totalАmount"></h1><!-- Общяя цена в корзине --></div><!-- Блок корзины -->
    </div>



  


    <div id="blockBrends" class="result1">
        <!-- Блок blockBrends начало -->

        <div class="brandBlock lg a9">
            <div class="brand">
                <h3 class="productName">Тройной чизбургер</h3>
                <img src="img_product/01.png" class="imgBrand" />
                <div class="blockPrice"><div class="price">469.99</div><span class="priceLogo">₽</span></div>
            </div>
            <div class="button">в козину</div>
        </div>

        <div class="brandBlock">
            <div class="brand">
                <h3 class="productName">Бургер с трюфельным сыром</h3>
                <img src="img_product/02.png" class="imgBrand" />
                <div class="blockPrice"><div class="price">479.99</div><span class="priceLogo">₽</span></div>
            </div>
            <div class="button">в корзину</div>
        </div>

        <div class="brandBlock">
            <div class="brand">
                <h3 class="productName">Бургер с креветками</h3>
                <img src="img_product/03.png" class="imgBrand" />
                <div class="blockPrice"><div class="price">1990.99</div><span class="priceLogo">₽</span></div>
            </div>
            <div class="button">в козину</div>
        </div>

        <div class="brandBlock">
            <div class="brand">
                <h3 class="productName">Курица По-Шанхайски Снэк-Обертывание</h3>
                <img src="img_product/04.png" class="imgBrand" />
                <div class="blockPrice"><div class="price">74990</div><span class="priceLogo">₽</span></div>
                </div>
            <div class="button">в корзину</div>
        </div>   
        
        <div class="brandBlock">
            <div class="brand">
                <h3 class="productName">Обертка для закусок из сосисок</h3>
                <img src="img_product/05.png" class="imgBrand" />
                <div class="blockPrice"><div class="price">74990</div><span class="priceLogo">₽</span></div>
                </div>
            <div class="button">в корзину</div>
        </div>        
        
        <div class="brandBlock">
            <div class="brand">
                <h3 class="productName">Бургер из говядины с креветками</h3>
                <img src="img_product/06.png" class="imgBrand" />
                <div class="blockPrice"> <div class="price">74990</div><span class="priceLogo">₽</span></div>
                </div>
            <div class="button">в корзину</div>
        </div>

          <div class="brandBlock">
            <div class="brand">
                <h3 class="productName">Двойной бургер с Булгоги</h3>
                    <img src="img_product/07.png" class="imgBrand" />
                    <div class="blockPrice"><div class="price">74990</div><span class="priceLogo">₽</span></div>
                    </div>
            <div class="button">в корзину</div>
        </div>

          <div class="brandBlock">
            <div class="brand">
                <h3 class="productName">Кока-Кола Нулевая средняя</h3>
                    <img src="img_product/08.png" class="imgBrand" />
                    <div class="blockPrice"><div class="price">74990</div><span class="priceLogo">₽</span></div>
                    </div>
            <div class="button">в корзину</div>
        </div>

         <div class="brandBlock">
            <div class="brand">
                <h3 class="productName">Наггетсы</h3>
                    <img src="img_product/09.png" class="imgBrand" />
                    <div class="blockPrice"><div class="price">74990</div><span class="priceLogo">₽</span></div>
                </div>
            <div class="button">в корзину</div>
        </div>

         <div class="brandBlock">
            <div class="brand">
                <h3 class="productName">Кофе Латте</h3>
                    <img src="img_product/10.png" class="imgBrand" />
                    <div class="blockPrice"><div class="price">74990</div><span class="priceLogo">₽</span></div>
                </div>
            <div class="button">в корзину</div>
        </div>

        <div class="brandBlock">
            <div class="brand">
                <h3 class="productName">Капучино</h3>
                    <img src="img_product/11.png" class="imgBrand" />
                    <div class="blockPrice"><div class="price">74990</div><span class="priceLogo">₽</span></div>
                </div>
            <div class="button">в корзину</div>
        </div>

         <div class="brandBlock">
            <div class="brand">
                <h3 class="productName">Американо</h3>
                    <img src="img_product/12.png" class="imgBrand" />
                    <div class="blockPrice"><div class="price">74990</div><span class="priceLogo">₽</span></div>
                </div>
            <div class="button">в корзину</div>
        </div>

    </div>
    <!-- Блок blockBrends конец -->


    <script>


        let brand = document.querySelectorAll(".brand");
        let button = document.querySelectorAll(".button");
        let price = document.querySelectorAll(".price");


        for (let n = 0; n <= brand.length; n++) {

            basket.innerHTML += `<div class="blockProduct">
        <div class="product"></div>
       <span class="plus"></span>
      <span class="quantity"></span>
      <span class="minus"></span>
        <span class="deliteProduct"></span></div>`;

        }
        let blockProduct = document.querySelectorAll(".blockProduct");
        let product = document.querySelectorAll(".product");
        let plus = document.querySelectorAll(".plus");
        let quantity = document.querySelectorAll(".quantity");
        let minus = document.querySelectorAll(".minus");
        let deliteProduct = document.querySelectorAll(".deliteProduct");


        for (let i = 0; i <= brand.length; i++) {

            let f = 0;
            f = localStorage.getItem(i);

            k = 0
            k = localStorage.getItem("numberProducts")

            s = 0;
            s = Number(localStorage.getItem('s'));

            button[i].onclick = () => {

                f++;
                k++;
                // Прибавляет сумму выбранного товара начало
                s += Number(price[i].innerHTML);

                localStorage.setItem('s', s.toFixed(2))

               
                totalАmount.innerHTML = localStorage.getItem('s')

                    
                // Прибавляет сумму выбранного товара конец
                // Прибавляет количество товара на один начало
                localStorage.setItem("numberProducts", k);
                numberProducts.textContent = localStorage.getItem("numberProducts");
                // Прибавляет количество товара на один конец
                localStorage.setItem(i, f);
                quantity[i].innerHTML = localStorage.getItem(i);

                localStorage.setItem(i + "product", (innerHTML = brand[i].innerHTML));
                product[i].innerHTML = localStorage.getItem(i + "product");

                localStorage.setItem(i + "minus", "<img src='logo/minus1.png' class='minus'/>");
                minus[i].innerHTML = localStorage.getItem(i + "minus");

                localStorage.setItem(i + "plus", "<img src='logo/plus1.png' class='plus'/>");
                plus[i].innerHTML = localStorage.getItem(i + "plus");

                localStorage.setItem(i + "deliteProduct", "<img src='logo/basket1.png' class='basket'/>");
                deliteProduct[i].innerHTML = localStorage.getItem(i + "deliteProduct");
                basket.style.display = 'ruby';
                blockProduct[i].style.display = 'block';


                //alert('Вы добавили товар в карзину')
            };

            plus[i].onclick = () => {
                f++;
                k++;
                // Прибавляет сумму выбранного товара начало
                s += Number(price[i].innerHTML);
                localStorage.setItem('s', s.toFixed(2))
                totalАmount.innerHTML = Number(localStorage.getItem('s'));

                // Прибавляет сумму выбранного товара конец
                // Прибавляет количество товара на один начало
                localStorage.setItem("numberProducts", k);
                numberProducts.innerHTML = localStorage.getItem("numberProducts")
                // Прибавляет количество товара на один конец
                localStorage.setItem(i, f);
                quantity[i].innerHTML = localStorage.getItem(i);


            };

            minus[i].onclick = () => {
                f--;
                k--;
                if (k < 1) {
                    basket.style.display = 'none';
                }
                // Отнимает сумму выбранного товара начало
                s -= Number(price[i].innerHTML);

                localStorage.setItem('s', s.toFixed(2))
                totalАmount.innerHTML = localStorage.getItem('s');
                // Отнимает сумму выбранного товара конец
                // Отнимает количество товара на один начало
                localStorage.setItem("numberProducts", k);
                numberProducts.innerHTML = localStorage.getItem("numberProducts")
                // Отнимает количество товара на один конец

                if (f < 1) {

                    quantity[i].innerHTML = localStorage.removeItem(i);

                    product[i].innerHTML = localStorage.removeItem(i + "product");
                    product[i].innerHTML = ""; // уирает undefined

                    minus[i].innerHTML = localStorage.removeItem(i + "minus");
                    minus[i].innerHTML = ""; // уирает undefined

                    plus[i].innerHTML = localStorage.removeItem(i + "plus");
                    plus[i].innerHTML = ""; // уирает undefined

                    deliteProduct[i].innerHTML = localStorage.removeItem(i + "deliteProduct");
                    deliteProduct[i].innerHTML = ""; // уирает undefined

                    f = "";
                    blockProduct[i].style.display = 'none';
                    // alert('Вы удалили товар')
                }

                localStorage.setItem(i, f);
                quantity[i].innerHTML = localStorage.getItem(i);
            };

            deliteProduct[i].onclick = () => {
                // Удаляет выбранный товар начао
                s -= Number(price[i].innerHTML) * f;
                localStorage.setItem('s', s.toFixed(2))
                totalАmount.innerHTML = localStorage.getItem('s');
                // Удаляет выбранный товар конец
                // Отнимает количество товара при закрытии товара начало
                k -= 1 * f
                if (k < 1) {
                    basket.style.display = 'none';
                }
                localStorage.setItem("numberProducts", k);
                numberProducts.innerHTML = localStorage.getItem("numberProducts")
                // Отнимает количество товара при закрытии товара начало

                quantity[i].innerHTML = localStorage.removeItem(i);
                product[i].innerHTML = localStorage.removeItem(i + "product");
                minus[i].innerHTML = localStorage.removeItem(i + "minus");
                plus[i].innerHTML = localStorage.removeItem(i + "plus");
                deliteProduct[i].innerHTML = localStorage.removeItem(i + "deliteProduct");
                quantity[i].innerHTML = ""; // уирает undefined
                product[i].innerHTML = ""; // уирает undefined
                minus[i].innerHTML = ""; // уирает undefined
                plus[i].innerHTML = ""; // уирает undefined
                deliteProduct[i].innerHTML = ""; // уирает undefined


                f = "";
                blockProduct[i].style.display = 'none';
            };
            totalАmount.innerHTML = localStorage.getItem('s');
            quantity[i].innerHTML = localStorage.getItem(i);
            product[i].innerHTML = localStorage.getItem(i + "product");
            minus[i].innerHTML = localStorage.getItem(i + "minus");
            plus[i].innerHTML = localStorage.getItem(i + "plus");
            deliteProduct[i].innerHTML = localStorage.getItem(i + "deliteProduct");
            numberProducts.innerHTML = localStorage.getItem("numberProducts")

        }

    </script>
    <div id="footer">
        <div id="paginationBlock"></div>

    </div>

    <script>
        // пагинация начало
        let brandBlock = document.querySelectorAll(".brandBlock");
        for (let w = 0; w < brandBlock.length / 4; w++) {
            paginationBlock.innerHTML += '<div class="pagination">' + w + '</div>'
        }
        let pagination = document.querySelectorAll(".pagination");
        // Автаматический клик по кнопке начало
        window.addEventListener("load", function () {
            pagination[0].click();
        });
        // Автаматический клик по кнопке конец

        for (let p = 0; p < brandBlock.length; p++) {
            pagination[p].onclick = function () {
                for (let o = 0; o < brandBlock.length; o++) {
                    brandBlock[o].style.display = 'none'
                }
                x = pagination[p].innerHTML
                z = x * 4 // Цыфра это открывается количество товаров на странице
                for (let m = z; m < z + 4; m++) { // Цыфра последователность смены товаров
                    brandBlock[m].style.display = 'inline-block'
                }
            }

        }
        // пагинация конец



    </script>
</body>
</html>
